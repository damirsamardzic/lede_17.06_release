#
# Copyright (C) 2014-2017 OpenWrt.org
#

preinit_set_mac_address() {
    local mac 

    . /lib/functions.sh
    . /lib/mvebu.sh

    case $(mvebu_board_name) in
    armada-ESPRESSObin)
        mac=$(cat /sys/class/net/eth0/address | cut -c1-16)
        ifconfig wan hw ether ${mac}0 2>/dev/null
        ifconfig lan0 hw ether ${mac}1 2>/dev/null
        ifconfig lan1 hw ether ${mac}2 2>/dev/null
        ;;  
    esac
}

boot_hook_add preinit_main preinit_set_mac_address

